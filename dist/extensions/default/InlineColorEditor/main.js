!function(){function t(t){var r={r:0,g:0,b:0},n=1,s=!1,a=!1;return"string"==typeof t&&(t=T(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(r=e(t.r,t.g,t.b),s=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=R(t.s),t.v=R(t.v),r=o(t.h,t.s,t.v),s=!0,a="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=R(t.s),t.l=R(t.l),r=i(t.h,t.s,t.l),s=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=w(n),{ok:s,format:t.format||a,r:F(255,B(r.r,0)),g:F(255,B(r.g,0)),b:F(255,B(r.b,0)),a:n}}function e(t,e,r){return{r:255*x(t,255),g:255*x(e,255),b:255*x(r,255)}}function r(t,e,r){t=x(t,255),e=x(e,255),r=x(r,255);var i,n,o=B(t,e,r),s=F(t,e,r),a=(o+s)/2;if(o==s)i=n=0;else{var l=o-s;switch(n=a>.5?l/(2-o-s):l/(o+s),o){case t:i=(e-r)/l+(r>e?6:0);break;case e:i=(r-t)/l+2;break;case r:i=(t-e)/l+4}i/=6}return{h:i,s:n,l:a}}function i(t,e,r){function i(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+(e-t)*(2/3-r)*6:t}var n,o,s;if(t=x(t,360),e=x(e,100),r=x(r,100),0===e)n=o=s=r;else{var a=.5>r?r*(1+e):r+e-r*e,l=2*r-a;n=i(l,a,t+1/3),o=i(l,a,t),s=i(l,a,t-1/3)}return{r:255*n,g:255*o,b:255*s}}function n(t,e,r){t=x(t,255),e=x(e,255),r=x(r,255);var i,n,o=B(t,e,r),s=F(t,e,r),a=o,l=o-s;if(n=0===o?0:l/o,o==s)i=0;else{switch(o){case t:i=(e-r)/l+(r>e?6:0);break;case e:i=(r-t)/l+2;break;case r:i=(t-e)/l+4}i/=6}return{h:i,s:n,v:a}}function o(t,e,r){t=6*x(t,360),e=x(e,100),r=x(r,100);var i=I.floor(t),n=t-i,o=r*(1-e),s=r*(1-n*e),a=r*(1-(1-n)*e),l=i%6,h=[r,s,o,o,a,r][l],c=[a,r,r,s,o,o][l],d=[o,o,a,r,r,s][l];return{r:255*h,g:255*c,b:255*d}}function s(t,e,r,i){var n=[H(L(t).toString(16)),H(L(e).toString(16)),H(L(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function a(t,e,r,i){var n=[H(E(i)),H(L(t).toString(16)),H(L(e).toString(16)),H(L(r).toString(16))];return n.join("")}function l(t,e){e=0===e?0:e||10;var r=N(t).toHsl();return r.s-=e/100,r.s=k(r.s),N(r)}function h(t,e){e=0===e?0:e||10;var r=N(t).toHsl();return r.s+=e/100,r.s=k(r.s),N(r)}function c(t){return N(t).desaturate(100)}function d(t,e){e=0===e?0:e||10;var r=N(t).toHsl();return r.l+=e/100,r.l=k(r.l),N(r)}function u(t,e){e=0===e?0:e||10;var r=N(t).toRgb();return r.r=B(0,F(255,r.r-L(255*-(e/100)))),r.g=B(0,F(255,r.g-L(255*-(e/100)))),r.b=B(0,F(255,r.b-L(255*-(e/100)))),N(r)}function f(t,e){e=0===e?0:e||10;var r=N(t).toHsl();return r.l-=e/100,r.l=k(r.l),N(r)}function g(t,e){var r=N(t).toHsl(),i=(L(r.h)+e)%360;return r.h=0>i?360+i:i,N(r)}function p(t){var e=N(t).toHsl();return e.h=(e.h+180)%360,N(e)}function _(t){var e=N(t).toHsl(),r=e.h;return[N(t),N({h:(r+120)%360,s:e.s,l:e.l}),N({h:(r+240)%360,s:e.s,l:e.l})]}function b(t){var e=N(t).toHsl(),r=e.h;return[N(t),N({h:(r+90)%360,s:e.s,l:e.l}),N({h:(r+180)%360,s:e.s,l:e.l}),N({h:(r+270)%360,s:e.s,l:e.l})]}function m(t){var e=N(t).toHsl(),r=e.h;return[N(t),N({h:(r+72)%360,s:e.s,l:e.l}),N({h:(r+216)%360,s:e.s,l:e.l})]}function v(t,e,r){e=e||6,r=r||30;var i=N(t).toHsl(),n=360/r,o=[N(t)];for(i.h=(i.h-(n*e>>1)+720)%360;--e;)i.h=(i.h+n)%360,o.push(N(i));return o}function y(t,e){e=e||6;for(var r=N(t).toHsv(),i=r.h,n=r.s,o=r.v,s=[],a=1/e;e--;)s.push(N({h:i,s:n,v:o})),o=(o+a)%1;return s}function C(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function w(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function x(t,e){O(t)&&(t="100%");var r=S(t);return t=F(e,B(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),I.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return F(1,B(0,t))}function $(t){return parseInt(t,16)}function O(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function S(t){return"string"==typeof t&&-1!=t.indexOf("%")}function H(t){return 1==t.length?"0"+t:""+t}function R(t){return 1>=t&&(t=100*t+"%"),t}function E(t){return Math.round(255*parseFloat(t)).toString(16)}function M(t){return $(t)/255}function T(t){t=t.replace(D,"").replace(K,"").toLowerCase();var e=!1;if(V[t])t=V[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=X.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=X.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=X.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=X.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=X.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=X.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=X.hex8.exec(t))?{a:M(r[1]),r:$(r[2]),g:$(r[3]),b:$(r[4]),format:e?"name":"hex8"}:(r=X.hex6.exec(t))?{r:$(r[1]),g:$(r[2]),b:$(r[3]),format:e?"name":"hex"}:(r=X.hex3.exec(t))?{r:$(r[1]+""+r[1]),g:$(r[2]+""+r[2]),b:$(r[3]+""+r[3]),format:e?"name":"hex"}:!1}var D=/^[\s,#]+/,K=/\s+$/,A=0,I=Math,L=I.round,F=I.min,B=I.max,P=I.random,N=function j(e,r){if(e=e?e:"",r=r||{},e instanceof j)return e;if(!(this instanceof j))return new j(e,r);var i=t(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=L(100*this._a)/100,this._format=r.format||i.format,this._gradientType=r.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=i.ok,this._tc_id=A++};N.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=w(t),this._roundA=L(100*this._a)/100,this},toHsv:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=n(this._r,this._g,this._b),e=L(360*t.h),r=L(100*t.s),i=L(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+i+"%)":"hsva("+e+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=r(this._r,this._g,this._b),e=L(360*t.h),i=L(100*t.s),n=L(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return a(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*x(this._r,255))+"%",g:L(100*x(this._g,255))+"%",b:L(100*x(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%)":"rgba("+L(100*x(this._r,255))+"%, "+L(100*x(this._g,255))+"%, "+L(100*x(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:U[s(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+a(this._r,this._g,this._b,this._a),r=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var n=N(t);r=n.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,n=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return n?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(v,arguments)},complement:function(){return this._applyCombination(p,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},N.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]="a"===i?t[i]:R(t[i]));t=r}return N(t,e)},N.equals=function(t,e){return t&&e?N(t).toRgbString()==N(e).toRgbString():!1},N.random=function(){return N.fromRatio({r:P(),g:P(),b:P()})},N.mix=function(t,e,r){r=0===r?0:r||50;var i,n=N(t).toRgb(),o=N(e).toRgb(),s=r/100,a=2*s-1,l=o.a-n.a;i=a*l==-1?a:(a+l)/(1+a*l),i=(i+1)/2;var h=1-i,c={r:o.r*i+n.r*h,g:o.g*i+n.g*h,b:o.b*i+n.b*h,a:o.a*s+n.a*(1-s)};return N(c)},N.readability=function(t,e){var r=N(t),i=N(e),n=r.toRgb(),o=i.toRgb(),s=r.getBrightness(),a=i.getBrightness(),l=Math.max(n.r,o.r)-Math.min(n.r,o.r)+Math.max(n.g,o.g)-Math.min(n.g,o.g)+Math.max(n.b,o.b)-Math.min(n.b,o.b);return{brightness:Math.abs(s-a),color:l}},N.isReadable=function(t,e){var r=N.readability(t,e);return r.brightness>125&&r.color>500},N.mostReadable=function(t,e){for(var r=null,i=0,n=!1,o=0;o<e.length;o++){var s=N.readability(t,e[o]),a=s.brightness>125&&s.color>500,l=3*(s.brightness/125)+s.color/500;(a&&!n||a&&n&&l>i||!a&&!n&&l>i)&&(n=a,i=l,r=N(e[o]))}return r};var V=N.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=N.hexNames=C(V),X=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=N:"function"==typeof define&&define.amd?define("thirdparty/tinycolor-min",[],function(){return N}):window.tinycolor=N}(),define("text",["module"],function(t){"use strict";var e,r,i,n,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,c=h&&location.protocol&&location.protocol.replace(/\:/,""),d=h&&location.hostname,u=h&&(location.port||void 0),f={},g=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var t,e,r;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){r=s[e];try{t=new ActiveXObject(r)}catch(i){}if(t){s=[r];break}}return t},parseName:function(t){var e,r,i,n=!1,o=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!s||o>1)?(e=t.substring(0,o),r=t.substring(o+1,t.length)):e=t,i=r||e,o=i.indexOf("!"),-1!==o&&(n="strip"===i.substring(o+1),i=i.substring(0,o),r?r=i:e=i),{moduleName:e,ext:r,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,r,i,n){var o,s,a,l=e.xdRegExp.exec(t);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==r||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==n)):!0},finishLoad:function(t,r,i,n){i=r?e.strip(i):i,g.isBuild&&(f[t]=i),n(i)},load:function(t,r,i,n){if(n.isBuild&&!n.inlineText)return void i();g.isBuild=n.isBuild;var o=e.parseName(t),s=o.moduleName+(o.ext?"."+o.ext:""),a=r.toUrl(s),l=g.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void i():void(!h||l(a,c,d,u)?e.get(a,function(r){e.finishLoad(t,o.strip,r,i)},function(t){i.error&&i.error(t)}):r([s],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,i)}))},write:function(t,r,i,n){if(f.hasOwnProperty(r)){var o=e.jsEscape(f[r]);i.asModule(t+"!"+r,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,r,i,n,o){var s=e.parseName(r),a=s.ext?"."+s.ext:"",l=s.moduleName+a,h=i.toUrl(s.moduleName+a)+".js";e.load(l,i,function(r){var i=function(t){return n(h,t)};i.asModule=function(t,e){return n.asModule(t,h,e)},e.write(t,l,i,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(r=require.nodeRequire("fs"),e.get=function(t,e,i){try{var n=r.readFileSync(t,"utf8");0===n.indexOf("\ufeff")&&(n=n.substring(1)),e(n)}catch(o){i(o)}}):"xhr"===g.env||!g.env&&e.createXhr()?e.get=function(t,r,i,n){var o,s=e.createXhr();if(s.open("GET",t,!0),n)for(o in n)n.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),n[o]);g.onXhr&&g.onXhr(s,t),s.onreadystatechange=function(e){var n,o;4===s.readyState&&(n=s.status,n>399&&600>n?(o=new Error(t+" HTTP status: "+n),o.xhr=s,i(o)):r(s.responseText),g.onXhrComplete&&g.onXhrComplete(s,t))},s.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var r,i,n="utf-8",o=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),n)),l="";try{for(r=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&r.append(i);null!==(i=a.readLine());)r.append(s),r.append(i);l=String(r.toString())}finally{a.close()}e(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,n=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,e.get=function(t,e){var r,s,a,l={};o&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{r=i["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),r.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),s.init(r,"utf-8",r.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(r.available(),l),s.close(),r.close(),e(l.value)}catch(h){throw new Error((a&&a.path||"")+": "+h)}}),e}),define("text!ColorEditorTemplate.html",[],function(){return'\n<div tabindex="-1" class="color-editor">\n  <section>\n    <div class="sliders">\n      <div class="color-selection-field">\n        <div class="saturation-gradient gradient-overlay"></div>\n        <div class="luminosity-gradient gradient-overlay"></div>\n        <div tabindex="0" class="selector-base">\n          <div class="selector"></div>\n        </div>\n      </div>\n      <div class="hue-slider slider">\n        <div tabindex="0" class="selector-base">\n          <div class="selector"></div>\n        </div>\n      </div>\n      <div class="opacity-slider slider">\n        <div class="opacity-gradient gradient-overlay"></div>\n        <div tabindex="0" class="selector-base">\n          <div class="selector"></div>\n        </div>\n      </div>\n    </div>\n    <footer>\n      <input class="color-value" />\n      <ul class="button-bar">\n        <li class="selected" title="{{COLOR_EDITOR_RGBA_BUTTON_TIP}}"><a href="#" tabindex="0" class="rgba">RGBa</a></li>\n        <li title="{{COLOR_EDITOR_HEX_BUTTON_TIP}}"><a href="#" tabindex="0" class="hex">Hex</a></li>\n        <li title="{{COLOR_EDITOR_HSLA_BUTTON_TIP}}"><a href="#" tabindex="0" class="hsla">HSLa</a></li>\n      </ul>\n    </footer>\n  </section>\n  <aside>\n    <header>\n      <div class="large-swatches">\n        <div class="current-color large-swatch" title="{{COLOR_EDITOR_CURRENT_COLOR_SWATCH_TIP}}"></div>\n        <div class="original-color large-swatch" title="{{COLOR_EDITOR_ORIGINAL_COLOR_SWATCH_TIP}}"></div>\n      </div>\n    </header>\n    <ul class="swatches"></ul>\n  </aside>\n</div>'}),define("ColorEditor",["require","exports","module","thirdparty/tinycolor-min","text!ColorEditorTemplate.html"],function(t,e,r){"use strict";function i(t,e,r,i){this.$element=$(h.render(d,l)),t.append(this.$element),this._callback=r,this._handleKeydown=this._handleKeydown.bind(this),this._handleOpacityKeydown=this._handleOpacityKeydown.bind(this),this._handleHslKeydown=this._handleHslKeydown.bind(this),this._handleHueKeydown=this._handleHueKeydown.bind(this),this._handleSelectionKeydown=this._handleSelectionKeydown.bind(this),this._handleOpacityDrag=this._handleOpacityDrag.bind(this),this._handleHueDrag=this._handleHueDrag.bind(this),this._handleSelectionFieldDrag=this._handleSelectionFieldDrag.bind(this),this._color=c(e),this._originalColor=e,this._redoColor=null,this._isUpperCase=s.get("uppercaseColors"),s.on("change","uppercaseColors",function(){this._isUpperCase=s.get("uppercaseColors")}.bind(this)),this.$colorValue=this.$element.find(".color-value"),this.$buttonList=this.$element.find("ul.button-bar"),this.$rgbaButton=this.$element.find(".rgba"),this.$hexButton=this.$element.find(".hex"),this.$hslButton=this.$element.find(".hsla"),this.$currentColor=this.$element.find(".current-color"),this.$originalColor=this.$element.find(".original-color"),this.$selection=this.$element.find(".color-selection-field"),this.$selectionBase=this.$element.find(".color-selection-field .selector-base"),this.$hueBase=this.$element.find(".hue-slider .selector-base"),this.$opacityGradient=this.$element.find(".opacity-gradient"),this.$hueSlider=this.$element.find(".hue-slider"),this.$hueSelector=this.$element.find(".hue-slider .selector-base"),this.$opacitySlider=this.$element.find(".opacity-slider"),this.$opacitySelector=this.$element.find(".opacity-slider .selector-base"),this.$swatches=this.$element.find(".swatches"),this._addSwatches(i),this._addListeners(),this.$originalColor.css("background-color",this._originalColor),this._commitColor(e)}function n(t,e,r){var i=t-e;return i=Math.min(r,Math.max(0,i))}var o=brackets.getModule("utils/KeyEvent"),s=brackets.getModule("preferences/PreferencesManager"),a=brackets.getModule("utils/StringUtils"),l=brackets.getModule("strings"),h=brackets.getModule("thirdparty/mustache/mustache"),c=t("thirdparty/tinycolor-min"),d=t("text!ColorEditorTemplate.html"),u=5;i.prototype._color=null,i.prototype._hsv=c("rgba(0,0,0,1)").toHsv(),i.prototype._redoColor=null,i.prototype._originalColor=null,i.prototype.getRootElement=function(){return this.$element},i.prototype._addListeners=function(){this._bindColorFormatToRadioButton("rgba"),this._bindColorFormatToRadioButton("hex"),this._bindColorFormatToRadioButton("hsla"),this._bindInputHandlers(),this._bindOriginalColorButton(),this._registerDragHandler(this.$selection,this._handleSelectionFieldDrag),this._registerDragHandler(this.$hueSlider,this._handleHueDrag),this._registerDragHandler(this.$opacitySlider,this._handleOpacityDrag),this._bindKeyHandler(this.$selectionBase,this._handleSelectionKeydown),this._bindKeyHandler(this.$hueBase,this._handleHueKeydown),this._bindKeyHandler(this.$opacitySelector,this._handleOpacityKeydown),this._bindKeyHandler(this.$hslButton,this._handleHslKeydown),this._bindKeyHandler(this.$element,this._handleKeydown)},i.prototype._synchronize=function(){var t=this.getColor().getOriginalInput(),e=c(t),r="hsl("+this._hsv.h+", 100%, 50%)";this._updateColorTypeRadioButtons(e.getFormat()),this.$colorValue.val(t),this.$currentColor.css("background-color",t),this.$selection.css("background-color",r),this.$hueBase.css("background-color",r),this.$selectionBase.css("background-color",e.toHexString()),this.$opacityGradient.css("background-image","linear-gradient("+r+", transparent)"),this.$hueSelector.css("bottom",this._hsv.h/360*100+"%"),this.$opacitySelector.css("bottom",100*this._hsv.a+"%"),isNaN(this._hsv.s)||(this._hsv.s=100*this._hsv.s+"%"),isNaN(this._hsv.v)||(this._hsv.v=100*this._hsv.v+"%"),this.$selectionBase.css({left:this._hsv.s,bottom:this._hsv.v})},i.prototype.focus=function(){return this.$selectionBase.is(":focus")?!1:(this.$selectionBase.focus(),!0)},i.prototype.destroy=function(){s.off("change","uppercaseColors")},i.prototype.getColor=function(){return this._color},i.prototype._updateColorTypeRadioButtons=function(t){switch(this.$buttonList.find("li").removeClass("selected"),t){case"rgb":this.$buttonList.find(".rgba").parent().addClass("selected");break;case"hex":case"name":this.$buttonList.find(".hex").parent().addClass("selected");break;case"hsl":this.$buttonList.find(".hsla").parent().addClass("selected")}},i.prototype._bindColorFormatToRadioButton=function(t,e,r){var i,n=this;i=function(t){var e=$(t.currentTarget).html().toLowerCase().replace("%","p"),r=n.getColor().toString(),i=c(r);switch(e){case"hsla":r=i.toHslString();break;case"rgba":r=i.toRgbString();break;case"prgba":r=i.toPercentageRgbString();break;case"hex":r=i.toHexString(),n._hsv.a=1}r=n._isUpperCase?r.toUpperCase():r,n._commitColor(r,!1)},this.$element.find("."+t).click(i)},i.prototype._bindOriginalColorButton=function(){var t=this;this.$originalColor.click(function(e){t._commitColor(t._originalColor,!0)})},i.prototype._convertToNormalRGB=function(t){var e=t.match(/^rgb.*?([0-9]+)\%.*?([0-9]+)\%.*?([0-9]+)\%/i);if(e){var r,i,n;for(r=0;3>r;r++)i=e[r+1],n=Math.round(255*Number(i)/100),isNaN(n)||(t=t.replace(i+"%",n))}return t},i.prototype._normalizeColorString=function(t){var e=t;return t.match(/^#[0-9a-fA-F]{6}/)?c(t).toString():(t.match(/^(rgb|hsl)/i)&&(e=e.replace(/,\s*/g,", "),e=e.replace(/\(\s+/,"("),e=e.replace(/\s+\)/,")")),e)},i.prototype._handleTextFieldInput=function(t){var e=$.trim(this.$colorValue.val()),r=c(e),i=r.isValid();i&&(i=r.toString()===this._normalizeColorString(e)),t&&!i&&(e=this.getColor().toString()),(t||i)&&this._commitColor(e,!0)},i.prototype._bindInputHandlers=function(){var t=this;this.$colorValue.bind("input",function(e){t._handleTextFieldInput(!1)}),this.$colorValue.bind("change",function(e){t._handleTextFieldInput(!0)})},i.prototype._addSwatches=function(t){var e=this;t.forEach(function(t){var r=t.count>1?l.COLOR_EDITOR_USED_COLOR_TIP_PLURAL:l.COLOR_EDITOR_USED_COLOR_TIP_SINGULAR,i=a.format(r,t.value,t.count);e.$swatches.append("<li tabindex='0'><div class='swatch-bg'><div class='swatch' style='background-color: "+t.value+";' title='"+i+"'></div></div> <span class='value' title='"+i+"'>"+t.value+"</span></li>")}),this.$swatches.find("li").keydown(function(t){if(t.keyCode===o.DOM_VK_RETURN||t.keyCode===o.DOM_VK_ENTER||t.keyCode===o.DOM_VK_SPACE)e._commitColor($(t.currentTarget).find(".value").html());else if(t.keyCode===o.DOM_VK_TAB&&!t.shiftKey&&0===$(this).next("li").length)return e.$selectionBase.focus(),!1}),this.$swatches.find("li").click(function(t){e._commitColor($(t.currentTarget).find(".value").html())})},i.prototype.isValidColor=function(t){return c(t).isValid()},i.prototype.setColorAsHsv=function(t){var e,r,i=c(this.getColor()).getFormat();switch($.extend(this._hsv,t),r=c(this._hsv),i){case"hsl":e=r.toHslString();break;case"rgb":e=r.toRgbString();break;case"prgb":e=r.toPercentageRgbString();break;case"hex":case"name":e=this._hsv.a<1?r.toRgbString():r.toHexString()}e=this._isUpperCase?e.toUpperCase():e,this._commitColor(e,!1)},i.prototype._commitColor=function(t,e){void 0===e&&(e=!0),this._callback(t),this._color=c(t),e&&(this._hsv=this._color.toHsv()),this._redoColor=null,this._synchronize()},i.prototype.setColorFromString=function(t){this._commitColor(t,!0)},i.prototype._handleSelectionFieldDrag=function(t){var e=this.$selection.height(),r=this.$selection.width(),i=n(t.clientX,this.$selection.offset().left,r),o=n(t.clientY,this.$selection.offset().top,e),s={};s.s=i/r,s.v=1-o/e,this.setColorAsHsv(s,!1),this.$selection.find(".selector-base").is(":focus")||this.$selection.find(".selector-base").focus()},i.prototype._handleHueDrag=function(t){var e=this.$hueSlider.height(),r=n(t.clientY,this.$hueSlider.offset().top,e),i={};i.h=360*(1-r/e),this.setColorAsHsv(i,!1),this.$hueSlider.find(".selector-base").is(":focus")||this.$hueSlider.find(".selector-base").focus()},i.prototype._handleOpacityDrag=function(t){var e=this.$opacitySlider.height(),r=n(t.clientY,this.$opacitySlider.offset().top,e),i={};i.a=1-r/e,this.setColorAsHsv(i,!1),this.$opacitySlider.find(".selector-base").is(":focus")||this.$opacitySlider.find(".selector-base").focus()},i.prototype._registerDragHandler=function(t,e){var r=function(t){$(window).unbind("mousemove",e),$(window).unbind("mouseup",r)};t.mousedown(function(t){$(window).bind("mousemove",e),$(window).bind("mouseup",r)}),t.mousedown(e)},i.prototype.undo=function(){if(this._originalColor.toString()!==this._color.toString()){var t=this._color.toString();this._commitColor(this._originalColor,!0),this._redoColor=t}},i.prototype.redo=function(){this._redoColor&&(this._commitColor(this._redoColor,!0),this._redoColor=null)},i.prototype._handleKeydown=function(t){var e="win"===brackets.platform?t.ctrlKey:t.metaKey;if(e)switch(t.keyCode){case o.DOM_VK_Z:return t.shiftKey?this.redo():this.undo(),!1;case o.DOM_VK_Y:return this.redo(),!1}else if(t.keyCode===o.DOM_VK_LEFT||t.keyCode===o.DOM_VK_RIGHT||t.keyCode===o.DOM_VK_UP||t.keyCode===o.DOM_VK_DOWN){var r=!1,i=$(t.target);if(i.is("input:not([type])")||i.is("input[type=text]")?i[0].selectionStart===i[0].selectionEnd&&(t.keyCode===o.DOM_VK_LEFT&&0===i[0].selectionStart||t.keyCode===o.DOM_VK_RIGHT&&i[0].selectionEnd===i.val().length)&&(r=!0):r=!0,r)return t.stopPropagation(),!1}},i.prototype._handleHslKeydown=function(t){return t.keyCode!==o.DOM_VK_TAB||t.shiftKey||0!==this.$swatches.children().length?void 0:(this.$selectionBase.focus(),!1)},i.prototype._handleSelectionKeydown=function(t){var e,r,i,n={},s=1.5;switch(t.keyCode){case o.DOM_VK_LEFT:case o.DOM_VK_RIGHT:return s=t.shiftKey?s*u:s,e=Number($.trim(this.$selectionBase[0].style.left.replace("%",""))),i=t.keyCode===o.DOM_VK_LEFT?e-s:e+s,e=Math.min(100,Math.max(0,i)),n.s=e/100,this.setColorAsHsv(n,!1),!1;case o.DOM_VK_DOWN:case o.DOM_VK_UP:return s=t.shiftKey?s*u:s,r=Number($.trim(this.$selectionBase[0].style.bottom.replace("%",""))),i=t.keyCode===o.DOM_VK_DOWN?r-s:r+s,r=Math.min(100,Math.max(0,i)),n.v=r/100,this.setColorAsHsv(n,!1),!1;case o.DOM_VK_TAB:if(t.shiftKey)return 0===this.$swatches.children().length?this.$hslButton.focus():this.$swatches.find("li:last").focus(),!1}},i.prototype._handleHueKeydown=function(t){var e={},r=Number(this._hsv.h),i=3.6;switch(t.keyCode){case o.DOM_VK_DOWN:return i=t.shiftKey?i*u:i,e.h=0>=r-i?360-i:r-i,this.setColorAsHsv(e,!1),!1;case o.DOM_VK_UP:return i=t.shiftKey?i*u:i,e.h=r+i>=360?i:r+i,this.setColorAsHsv(e,!1),!1}},i.prototype._handleOpacityKeydown=function(t){var e=this._hsv.a,r={},i=.01;switch(t.keyCode){case o.DOM_VK_DOWN:return i=t.shiftKey?i*u:i,e>0&&(r.a=0>=e-i?0:e-i,this.setColorAsHsv(r)),!1;case o.DOM_VK_UP:return i=t.shiftKey?i*u:i,100>e&&(r.a=e+i>=1?1:e+i,this.setColorAsHsv(r)),!1}},i.prototype._bindKeyHandler=function(t,e){t.bind("keydown",e)},$(window.document).on("mousedown",".color-selection-field, .slider, .large-swatch",function(t){t.preventDefault()}),e.ColorEditor=i}),define("InlineColorEditor",["require","exports","module","ColorEditor"],function(t,e,r){"use strict";function i(t,e){this._color=t,this._marker=e,this._isOwnChange=!1,this._isHostChange=!1,this._origin="+InlineColorEditor_"+h++,this._handleColorChange=this._handleColorChange.bind(this),this._handleHostDocumentChange=this._handleHostDocumentChange.bind(this),o.call(this)}function n(t,e){return t.count===e.count?0:t.count>e.count?-1:t.count<e.count?1:void 0}var o=brackets.getModule("editor/InlineWidget").InlineWidget,s=t("ColorEditor").ColorEditor,a=brackets.getModule("utils/ColorUtils"),l=7,h=1;i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.parentClass=o.prototype,i.prototype.colorEditor=null,i.prototype._color=null,i.prototype._marker=null,i.prototype._isOwnChange=null,i.prototype._isHostChange=null,i.prototype._origin=null,i.prototype.getCurrentRange=function(){var t,e,r;if(t=this._marker&&this._marker.find(),e=t&&t.from,!e)return null;r=t.to,r||(r={line:e.line});var i=this.hostEditor.document.getLine(e.line),n=i.substr(e.ch).match(a.COLOR_REGEX);return n&&(void 0===r.ch||r.ch-e.ch<n[0].length)&&(r.ch=e.ch+n[0].length,this._marker.clear(),this._marker=this.hostEditor._codeMirror.markText(e,r)),
void 0===r.ch?null:{start:e,end:r}},i.prototype._handleColorChange=function(t){var e=this;if(t!==this._color){var r=this.getCurrentRange();if(!r)return;if(!this._isHostChange){var i={line:r.start.line,ch:r.start.ch+t.length};this._isOwnChange=!0,this.hostEditor.document.batchOperation(function(){e.hostEditor.setSelection(r.start,r.end),e.hostEditor.document.replaceRange(t,r.start,r.end,e._origin),e.hostEditor.setSelection(r.start,i),e._marker&&(e._marker.clear(),e._marker=e.hostEditor._codeMirror.markText(r.start,i))}),this._isOwnChange=!1}this._color=t}},i.prototype.load=function(t){i.prototype.parentClass.load.apply(this,arguments);var e=this.hostEditor.document.getText().match(a.COLOR_REGEX),r=this._collateColors(e,l);this.colorEditor=new s(this.$htmlContent,this._color,this._handleColorChange,r)},i.prototype.onAdded=function(){i.prototype.parentClass.onAdded.apply(this,arguments);var t=this.hostEditor.document;t.addRef(),t.on("change",this._handleHostDocumentChange),this.hostEditor.setInlineWidgetHeight(this,this.colorEditor.getRootElement().outerHeight(),!0),this.colorEditor.focus()},i.prototype.onClosed=function(){i.prototype.parentClass.onClosed.apply(this,arguments),this._marker&&this._marker.clear();var t=this.hostEditor.document;t.off("change",this._handleHostDocumentChange),t.releaseRef(),this.colorEditor.destroy()},i.prototype._collateColors=function(t,e){var r={};t.forEach(function(t){var e=t.toLowerCase();r[e]?r[e].count++:r[e]={value:t,count:1}});var i=$.map(r,function(t){return t});return i.sort(n),i.slice(0,e)},i.prototype._handleHostDocumentChange=function(){if(!this._isOwnChange){var t=this.getCurrentRange();if(t){var e=this.hostEditor.document.getRange(t.start,t.end);e!==this._color&&this.colorEditor.isValidColor(e)&&(this._isHostChange=!0,this.colorEditor.setColorFromString(e),this._isHostChange=!1)}else this.close()}},e.InlineColorEditor=i}),define("main",["require","exports","module","InlineColorEditor"],function(t,e,r){"use strict";function i(t,e){var r,i,n,o,s,a,h,c;if(o=t.getSelection(),o.start.line!==o.end.line)return null;r=new RegExp(l.COLOR_REGEX),i=t.document.getLine(e.line);do n=r.exec(i),n&&(s=n.index,a=s+n[0].length);while(n&&(e.ch<s||e.ch>a));return n?(e.ch=s,h={line:e.line,ch:a},c=t._codeMirror.markText(e,h),t.setSelection(e,h),{color:n[0],marker:c}):null}function n(t,e){var r,n,o=i(t,e);return o?(r=new a(o.color,o.marker),r.load(t),n=new $.Deferred,n.resolve(r),n.promise()):null}var o=brackets.getModule("editor/EditorManager"),s=brackets.getModule("utils/ExtensionUtils"),a=t("InlineColorEditor").InlineColorEditor,l=brackets.getModule("utils/ColorUtils");s.loadStyleSheet(r,"css/main.css"),o.registerInlineEditProvider(n),e.prepareEditorForProvider=i,e.inlineColorEditorProvider=n});